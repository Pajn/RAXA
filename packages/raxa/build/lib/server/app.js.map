{"version":3,"sources":["../../src/lib/server/app.ts","lib/server/app.js"],"names":["main","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","serviceManager","startServices","firstInt","process","on","console","log","stopServices","exit"],"mappings":";;;;;;;;;;QAKMA,I,GAAAA,I;;AALN;;AACA;;AACA;;AACA;;;;ACHA,IAAIC,YAAa,aAAQ,UAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,WAAO,KAAKD,MAAMA,IAAIE,OAAV,CAAL,EAAyB,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACvD,iBAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAE,gBAAI;AAAEC,qBAAKN,UAAUO,IAAV,CAAeF,KAAf,CAAL;AAA8B,aAApC,CAAqC,OAAOG,CAAP,EAAU;AAAEL,uBAAOK,CAAP;AAAY;AAAE;AAC3F,iBAASC,QAAT,CAAkBJ,KAAlB,EAAyB;AAAE,gBAAI;AAAEC,qBAAKN,UAAU,OAAV,EAAmBK,KAAnB,CAAL;AAAkC,aAAxC,CAAyC,OAAOG,CAAP,EAAU;AAAEL,uBAAOK,CAAP;AAAY;AAAE;AAC9F,iBAASF,IAAT,CAAcI,MAAd,EAAsB;AAAEA,mBAAOC,IAAP,GAAcT,QAAQQ,OAAOL,KAAf,CAAd,GAAsC,IAAIN,CAAJ,CAAM,UAAUG,OAAV,EAAmB;AAAEA,wBAAQQ,OAAOL,KAAf;AAAwB,aAAnD,EAAqDO,IAArD,CAA0DR,SAA1D,EAAqEK,QAArE,CAAtC;AAAuH;AAC/IH,aAAK,CAACN,YAAYA,UAAUa,KAAV,CAAgBhB,OAAhB,EAAyBC,cAAc,EAAvC,CAAb,EAAyDS,IAAzD,EAAL;AACH,KALM,CAAP;AAMH,CAPD;ADKM,SAAAZ,IAAA,GAAA;ACQF,WAAOC,UAAU,IAAV,EAAgB,KAAK,CAArB,EAAwB,KAAK,CAA7B,6BAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;ADPnCkB,sCCOmC,GDPlB,gCCOkB;AAAA;AAAA,+BDLnCA,eAAeC,aAAf,8ECKmC;;AAAA;ADCrCC,gCCDqC,GDC1B,ICD0B;;ADEzCC,gCAAQC,EAAR,CAAW,QAAX,EAAqB,YAAA;AACnB,gCAAIF,QAAJ,EAAc;AACZG,wCAAQC,GAAR,CAAY,sEAAZ;AACAJ,2CAAW,KAAX;AACAF,+CAAeO,YAAf;AACD,6BAJD,MAIO;AACLJ,wCAAQK,IAAR,CAAa,CAAb;AACD;AACF,yBARD;;ACFyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhC,EAAP;ADWH","file":"app.js","sourcesContent":["import {ServiceManager} from 'raxa-common'\nimport {ApiService} from './api'\nimport {PluginSupervisor} from './plugin-supervisor'\nimport {StorageService} from './storage'\n\nexport async function main() {\n  const serviceManager = new ServiceManager()\n\n  await serviceManager.startServices(\n    StorageService,\n    PluginSupervisor,\n    ApiService,\n  )\n\n  let firstInt = true\n  process.on('SIGINT', () => {\n    if (firstInt) {\n      console.log('\\n\\nStopping services gracefully, press ctrl+c again to force quit\\n')\n      firstInt = false\n      serviceManager.stopServices()\n    } else {\n      process.exit(1)\n    }\n  })\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ServiceManager } from 'raxa-common';\nimport { ApiService } from './api';\nimport { PluginSupervisor } from './plugin-supervisor';\nimport { StorageService } from './storage';\nexport function main() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const serviceManager = new ServiceManager();\n        yield serviceManager.startServices(StorageService, PluginSupervisor, ApiService);\n        let firstInt = true;\n        process.on('SIGINT', () => {\n            if (firstInt) {\n                console.log('\\n\\nStopping services gracefully, press ctrl+c again to force quit\\n');\n                firstInt = false;\n                serviceManager.stopServices();\n            }\n            else {\n                process.exit(1);\n            }\n        });\n    });\n}\n"]}